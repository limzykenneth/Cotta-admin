<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head profile="http://www.w3.org/2005/10/profile">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Char Admin</title>
        
        <!-- for Google -->
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="copyright" content="" />
        <meta name="application-name" content="" />
        
        <!-- for Facebook -->
        <meta property="og:title" content="The Site's Title" />
        <meta property="og:type" content="" />
        <meta property="og:image" content="" />
        <meta property="og:url" content="" />
        <meta property="og:description" content="" />
        
        <!-- for Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="">
        <meta name="twitter:title" content="The Site's Title" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:image" content="" />
        
        <!-- author info -->
        <meta name="author" content="Kenneth Lim <limzy.kenneth@gmail.com> (http://designerken.be)" />
        <link rel="author" href="http://designerken.be"/>
        
        <!--iOS -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
        <!-- Favicons -->
        <link rel="manifest" href="favicon/manifest.json">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="theme-color" content="#fff">
        <meta name="application-name" content="UAL Futures">
        <link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon-180x180.png">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="UAL Futures">
        <meta name="msapplication-TileColor" content="#fff">
        <meta name="msapplication-TileImage" content="favicon/mstile-144x144.png">
        <meta name="msapplication-config" content="favicon/browserconfig.xml">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="192x192" href="favicon/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
        <link rel="shortcut icon" href="favicon/favicon.ico">
    
        <!-- CSS -->
        <link rel="stylesheet" href="/stylesheets/normalize.min.css">
        <link rel="stylesheet" href="/stylesheets/style.min.css">
        
        <!-- jQuery -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="./javascripts/vendor/jquery.min.js"><\/script>')</script>
        <!-- Underscore -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script>window._ || document.write('<script src="./javascripts/vendor/underscore-min.js"><\/script>')</script>
        <!-- Backbone -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
        <script>window.Backbone || document.write('<script src="./javascripts/vendor/backbone-min.js"><\/script>')</script>
        
        <!-- Font Awesome -->
        <script src="https://use.fontawesome.com/501e4ec8bc.js"></script>
        
        <!-- moment.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.min.js"></script>
        
    </head>

    <body>
        <!--[if lt IE 9]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <header id="page-header">
        	<span class="left">
        		<a href="/"><i class="fa fa-2x fa-home" aria-hidden="true"></i></a>
        	</span>
        
        	<span class="right">
        	</span>
        </header>
        
        <script id="header-right-template" type="text/template">
        	<%
        	if(window.tokenData){
        	%>
        		<a href="<%= window.rootURL %>/account"><i class="fa fa-2x fa-user" aria-hidden="true"></i></a>
        		<a href="<%= window.rootURL %>/logout"><i class="fa fa-2x fa-sign-out" aria-hidden="true"></i></a>
        	<%
        	}else{
        	%>
        		<a href="<%= window.rootURL %>/signup"><i class="fa fa-2x fa-user-plus" aria-hidden="true"></i></a>
        		<a href="<%= window.rootURL %>/login"><i class="fa fa-2x fa-sign-in" aria-hidden="true"></i></a>
        	<%
        	}
        	%>
        </script>
		<div id="page-content">
            <section class="sidebar">
            	<div class="sidebar-admin-list"></div>
            
            	<h3 class="sidebar-title">All Collections</h3>
            	<div class="sidebar-list"></div>
            </section>
            
            <script id="sidebar-list-template" type="text/template">
            	<%
            	_.each(schemas, function(el, i){
            	%>
            		<div class="sidebar-items"><a href="<%= window.rootURL %>/collections/<%= el.collectionSlug %>"><%= el.collectionName %></a></div>
            	<%
            	});
            	%>
            </script>
            
            <script id="sidebar-admin-list-template" type="text/template">
            	<%
            	if(role == "administrator"){
            	%>
            		<div class="sidebar-items"><a href="<%= window.rootURL %>/users">Users</a></div>
            		<div class="sidebar-items"><a href="<%= window.rootURL %>/config">Configurations</a></div>
            	<%
            	}
            	%>
            </script>            <section class="main-content">
            	<h1></h1>
            	<p>Welcome </p>
            </section>
            
            <script id="models-list-template" type="text/template">
            	<h1><%= schema.collectionName %> <a class="new-btn button" href="<%= window.rootURL %>/collections/<%= schema.collectionSlug %>/new">New</a>
            
            		<input class="delete-btn" type="submit" name="delete" value="Delete" action="<%= window.host %>/api/schema/<%= schema.collectionSlug %>">
            	</h1>
            
            	<ul class="models">
            		<%
            		if(data.length === 0){
            		%>
            			<p>No models created yet. Perhaps you want to click <a href="<%= window.rootURL %>/collections/<%= schema.collectionSlug %>/new">here</a> to create a new model?</p>
            		<%
            		}else{
            			_.each(data, function(el, i){
            		%>
            				<a href="/collections/<%= schema.collectionSlug %>/<%= el._uid %>"><li class="model card">
            					<span class="model-id"><%= el._uid %></span>
            					<span class="created-by">Created by: <%= el._metadata.created_by %></span>
            					<span class="date-created">Date created: <%= el._metadata.date_created %></span>
            					<span class="date-modified">Last modified: <%= el._metadata.date_modified %></span>
            				</li></a>
            		<%
            			});
            		}
            		%>
            	</ul>
            </script><script id="model-template" type="text/template">
            	<h1><%= collectionName %> - ID: <%= data._uid %> <a class="edit-btn button" href="<%= window.rootURL %>/collections/<%= collectionSlug %>/<%= data._uid %>/edit">Edit</a>
            
            	<input class="delete-btn" type="submit" name="delete" value="Delete" action="<%= window.host %>/api/collections/<%= collectionSlug %>/<%= data._uid %>">
            	</h1>
            
            	<article class="model">
            		<%
            		_.each(fields, function(field, i){
            		%>
            			<div class="field">
            				<h3 class="field-name"><%= field.name %></h3>
            				<div class="field-value">
            		<%
            			if(["wysiwyg", "text", "email", "radio"].includes(field.type)){
            		%>
            				<%= data[field.slug] %>
            		<%
            			}else if(field.type == "checkbox"){
            		%>
            				<ul class="checkbox-value">
            					<%
            					_.each(data[field.slug], function(val){
            					%>
            						<li><%= val %></li>
            					<%
            					});
            					%>
            				</ul>
            		<%
            			}else if(field.type == "image"){
            		%>
            				<img class="image-value" src="<%= window.rootURL %>/<%= data[field.slug] %>">
            				<br>URL: <%= window.rootURL %>/<%= data[field.slug] %>
            		<%
            			}
            		%>
            			</div>
            		</div>
            		<%
            		});
            		%>
            	</article>
            </script><script type="text/template" id="model-creation-template">
            	<h1>New <%= collectionName %></h1>
            
            	<form method="post" action="<%= window.host %>/api/collections/<%= collectionSlug %>" class="model-form" enctype="multipart/form-data">
            		<%
            		_.each(fields, function(field){
            		%>
            			<p>
            				<label for="<%= field.slug %>"><%= field.name %></label><br>
            			<%
            			if(field.type == "text" || field.type == "email"){
            			%>
            				<input type="<%= field.type %>" name="<%= field.slug %>">
            			<%
            			}else if(field.type == "checkbox" || field.type == "radio"){
            				_.each(field.properties.choices, function(value, key){
            			%>
            				<input type="<%= field.type %>" name="<%= field.slug %>" value="<%= value %>"> <%= key %><br>
            			<%
            				});
            			}else if(field.type == "wysiwyg"){
            			%>
            				<textarea name="<%= field.slug %>" class="wysiwyg-editor"></textarea>
            			<%
            			}else if(field.type == "image"){
            			%>
            				<input type="file" name="<%= field.slug %>" accept="image/gif,image/jpeg,image/png,.jpg,.jpeg,.png,.gif">
            			<%
            			}
            			%>
            			</p>
            		<%
            		});
            		%>
            		<p class="submit"><input type="submit" value="Save"></p>
            	</form>
            </script><script id="login-form-template" type="text/template">
            	<div class="login-container">
            		<div class="login-form">
            			<h1>Login</h1>
            			<form method="post" action="<%= window.host %>/api/tokens/generate_new_token">
            				<p>
            					<input name="username" type="text" placeholder="Username"><br>
            					<input name="password" type="password" placeholder="Password">
            				</p>
            				<p><input type="submit" value="Login"></p>
            			</form>
            		</div>
            	</div>
            </script>		</div>

        <footer id="page-footer">
        
        </footer>
        <script src="/javascripts/main.js"></script>
    </body>
</html>
